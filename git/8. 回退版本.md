### 1. 放弃修改

- 将工作区和暂存区的内容都重置到最近一次提交的状态。

  - 放弃特定文件的修改

      ```bash
      git restore <文件名>
      ```

  - 放弃所有文件的修改

      ```bash
      git reset --hard
      ```

- 只放弃工作区的修改，保留暂存区的内容：

    ```bash
    git restore --staged .
    ```

    或者：

    ```bash
    git reset --soft
    ```

- 放弃未跟踪的文件

    即新添加的文件，但尚未被 `git add` 添加到暂存区，使用以下命令删除这些文件：

    ```bash
    git clean -fd
    ```

  - `-f` 表示强制删除。
  - `-d` 表示删除目录。

**注意：这些操作会永久删除文件，所以在执行之前请确保你不再需要这些文件。**

### 2. 撤销最后一次提交

- 保留更改

    ```bash
    git reset HEAD~ --soft
    ```

  - `HEAD~` 表示上一次提交。
  - `--soft` 选项会撤销提交，但保留工作目录中的更改。

- 不保留更改

    ```bash
    git reset HEAD~ --hard
    ```

  - `--hard` 选项会撤销提交，并且清除工作目录中的所有更改。

### 3. 撤销多次提交

- 保留更改

    ```bash
    git reset <目标版本> --soft
    ```

- 不保留更改

    ```bash
    git reset <目标版本> --hard
    ```

### 4. 撤销远程分支的提交

- 方法一: **`git revert`**

    `git revert` 会创建一个新的提交，该提交是之前提交的逆操作，从而撤销之前的更改：

    ```bash
    git revert <目标版本>
    ```

- 方法二: **`git push --force`**

    强制推送本地分支到远程仓库（这会覆盖远程仓库的历史）:

    ```bash
    git push origin <分支名> --force
    ```

  **注意**：强制推送会覆盖远程仓库的历史，这可能会导致问题，特别是如果其他人也在使用该分支。

### 5. `git reset` 和 `git revert`对比

| 特性         | `git reset`                  | `git revert`               |
| ------------ | ---------------------------- | -------------------------- |
| **历史记录** | 改变历史记录(需要强制推送)   | 不改变历史记录             |
| **工作目录** | 可以保留或清空               | 保持不变                   |
| **暂存区**   | 可以保留或清空               | 保持不变                   |
| **新提交**   | 不创建新提交                 | 创建新提交                 |
| **适用场景** | 本地开发，需要回退到某个提交 | 团队协作，需要撤销某个提交 |

### 总结

- **`git reset`**：适用于本地开发，需要回退到某个提交或撤销最近的更改。
- **`git revert`**：适用于团队协作，需要撤销某个提交但不想改变历史记录。
- **使用 `git reflog`**：如果你不小心撤销了某些提交，可以使用 `git reflog` 查看提交历史，找到之前的提交哈希值，然后恢复。
